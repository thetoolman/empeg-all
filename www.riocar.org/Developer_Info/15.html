
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<title>rio car dot org</title>
	<base href="">
	<link rel="StyleSheet" href="../themes/Default/style/style.css" type="text/css">
</head>

<body background="../themes/RioCar2/images/outer_bg.gif" bgcolor="#FFFFFF" text="#000000" topmargin="0" bottommargin="0" leftmargin="0" rightmargin="0" marginheight="0" marginwidth="0" link="#00093C" vlink="#00093C" alink="#0000FF">
<table border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#000D52" style="border-collapse: collapse" bordercolor="#111111" background="../themes/RioCar2/images/header_bg.gif">
<tr>
<td><img border="0" src="../themes/RioCar2/images/logo.gif" width="270" height="90" Alt="Welcome to "></td>
<td align="right"><img border="0" src="../themes/RioCar2/images/header_mk2fade.gif" hspace="5" width="264" height="90"></td>
</tr>
</table>
<table border="0" cellspacing="0" width="100%" bgcolor="#666666" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">
<tr>
<td><font color="#FFFFFF">&nbsp;<b><font size="2" face="Verdana">Welcome to riocar.org!</font></b></font></td>
<td align="right"><font color="#FFFFFF"><font face="Verdana" size="2"><b>Friday, August 6th</b></font>&nbsp;</font></td>
</tr>
</table>
<table border="0" cellspacing="0" width="100%" bgcolor="#000000" cellpadding="0">
<tr>
<td width="100%">
<img border="0" src="../themes/RioCar2/images/clear.gif" width="1" height="1"></td>
</tr>
</table>
<TABLE><TR><TD VALIGN="TOP"><table border="0" cellspacing="0" cellpadding="0" width="150" bgcolor="000000"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="3"><tr><td bgcolor="666699" ><font class="contentheader" color=ffffff>Main Menu</font></td></tr><tr><td bgcolor="ffffff"><font class="content"><font class="content">
<strong><big>&middot;</big></strong>&nbsp;Web Links<br>
<strong><big>&middot;</big></strong>&nbsp;Downloads<br>
<strong><big>&middot;</big></strong>&nbsp;<a href="http://empegbbs.com">BBS/Forums</a><br>
<strong><big>&middot;</big></strong>&nbsp;<a href="../lens.html">Lens Compare</a><br>
<strong><big>&middot;</big></strong>&nbsp;Boot Logos<br>
<strong><big>&middot;</big></strong>&nbsp;<a href="../Button_Guide.html">Button Guide</a><br>
<strong><big>&middot;</big></strong>&nbsp;<a href="../Developer_Info.html">Developer Info</a><br>
<strong><big>&middot;</big></strong>&nbsp;<a href="../Drive_Upgrade.html">Drive Upgrade</a><br>
<strong><big>&middot;</big></strong>&nbsp;<a href="../FAQ.html">FAQ</a><br>
<strong><big>&middot;</big></strong>&nbsp;<a href="../Geek_Guide.html">Geek Guide</a><br>
<strong><big>&middot;</big></strong>&nbsp;Photo Gallery<br>
</font></font></td></tr></table></td></tr></table><br><table border="0" cellspacing="0" cellpadding="0" width="150" bgcolor="000000"><tr><td></td></tr></table><br><img src="../images/pix.gif" border="0" width="150" height="1"></td><td>&nbsp;&nbsp;</td><td width="100%" valign="top"><table width="100%" border="0" cellspacing="1" cellpadding="0" bgcolor="#000000"><tr><td>
<table width="100%" border="0" cellspacing="1" cellpadding="8" bgcolor="#ffffff"><tr><td>
<center><font class="content"><b>rio car dot org Developer Information</b></font></center><br><br><a name="top"></a><br>Category: <a href="../Developer_Info.html">Main</a> -> Disk Partitions<br><br><table width="100%" cellpadding="4" cellspacing="0" border="0"><tr bgcolor="#cccccc"><td colspan="2"><font class="option"><b>&nbsp;</b></font></td></tr><tr><td colspan="2"><strong><big>&middot;</big></strong>&nbsp;&nbsp;&nbsp;<a href="15.html#50">Default Partition Layout</a><BR><strong><big>&middot;</big></strong>&nbsp;&nbsp;&nbsp;<a href="15.html#51">The Dynamic Data Partition (hda3)</a><BR><strong><big>&middot;</big></strong>&nbsp;&nbsp;&nbsp;<a href="15.html#59">Song File Structure</a><BR></td></tr></table>
    <br><table width="100%" cellpadding="4" cellspacing="0" border="0"><tr bgcolor="#cccccc"><td colspan="2"><font class="option"><b>&nbsp;</b></font></td></tr><tr><td><a name="50"></a><strong><big>&middot;</big></strong>&nbsp;&nbsp;<b>Default Partition Layout</b><BR>&nbsp;(Entry last updated on February 5th, 2003)<p align="justify"><div align="left">
<P>
Your Empeg's primary hard drive, hda, has five partitions which are created by the Empeg Upgrade Wizard.  This table summarizes what each partition is used for, as well as the file system type, and the default size:
<p>
  <div align="center">
    <table width="95%" border="1" align="center">
      <tr valign="top"> 
<td><b>Partition</b></td><td><b>Contents</b></td><td><b>FS Type</b></td><td><b>Size (Megabytes)</b></td>
      </tr> 
      <tr valign="top"> 
<td><b><code>hda2</code></b></td><td><code>Free for developer use (user applications, /usr partition, etc.)</code></td><td><code>ext2</code></td><td><code>32</code></td>
</tr>

      <tr valign="top"> 
<td><b><code>hda3</code></b></td><td><code>The Empeg player application's dynamic data partition</code></td><td><code>raw (custom format)</code></td><td><code>16</code></td>
</tr>

      <tr valign="top"> 
<td><b><code>hda4</code></b></td><td><code>Music, databases, and player configuration</code></td><td><code>ext2</code></td><td><code>Approx. 80 megs less than the size of your drive</code></td>
</tr>

      <tr valign="top"> 
<td><b><code>hda5</code></b></td><td><code>The root Linux partition (/)</code></td><td><code>ext2</code></td><td><code>16</code></td>
</tr>

      <tr valign="top"> 
<td><b><code>hda6</code></b></td><td><code>Swap partition</code></td><td><code>swap</code></td><td><code>16</code></td>
</tr>



</table>

</div>
<br>
<ADDRESS class="author">Contributed by 
<A href="mailto:tonycpsu[nospam]@yahoo.com">Tony Cebzanov</A></ADDRESS>
</p><a href="15.html#top">Back to Top</a><HR></td></tr><tr><td><a name="51"></a><strong><big>&middot;</big></strong>&nbsp;&nbsp;<b>The Dynamic Data Partition (hda3)</b><BR>&nbsp;(Entry last updated on February 5th, 2003)<p align="justify"><font size="+1"><b>Disclaimer:</b></font><BR>While this information applies to all software versions between 1.00 and 2.00 inclusive, it will become incorrect after that.  Also, because the player app doesn't expect 3rd party apps to be writing to this partition, any user apps wishing to write to this partition should keep a backup in case bad things happen.

<p>
So you've got /dev/hda3. It's 16 megabytes long, or 32,768 sectors of 512 bytes. Sectors 4,096 to 32,767 inclusive contain the dynamic data, one sector per FID. So the data for, say, FID 0x4230 would be at sector 4,096 + 0x423. 

<p>
Each sector contains a 2-byte length field, a 2-byte CRC field, and a data structure the prefix of which is described in lib/protocol/dyndata_format.h in an emptool source release. The CRC algorithm, which obviously only applies to the main data structure and not the length and CRC fields, is the "CRC::CRC16" algorithm from lib/protocol/crc.h in an emptool source release. None of this has changed substantially since before v1.00, although the structure length has increased and some fields were never filled in in older releases. 

<p>
As you'll have spotted, this imposes a maximum of 28,672 files on the player (in fact, sixteen less than that, because the first fid is 0x100 not 0). So at some post-2.0 point, we'll rejig it to store several fids' data per sector, and whatever tools you're going to write with the information in this post will break. 

<p>
Of course, tools which use lib/protocol to read and write dynamic data, like emptool does, will be insulated from this change. 

<p>
(The other hard limit I mentioned is on the size of playlist that can be remembered over a shutdown: this information is stored in the first 512 sectors, in a way which changed between v1 and v2.) 
<br>
<br>

<ADDRESS class="author">Contributed by 
Peter Hartley</A></ADDRESS>

</p><a href="15.html#top">Back to Top</a><HR></td></tr><tr><td><a name="59"></a><strong><big>&middot;</big></strong>&nbsp;&nbsp;<b>Song File Structure</b><BR>&nbsp;(Entry last updated on February 13th, 2005)<p align="justify">Roger Lipscombe has prepared an excellent guide to the song file structure, it can be found <a href=http://www.differentpla.net/node/view/387>here</a>.</p><a href="15.html#top">Back to Top</a><HR></td></tr></table><br><br><div align="center"><b>[ <a href="../Developer_Info.html">Back to the index</a> ]</b></div></td></tr></table></td></tr></table>
</td></tr></table>
    <center><font class=tiny>

    <table border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#666666" height="20">
  <tr>
    <td width="100%" align="center">
    <font color="#ffffff" face="Verdana" size="2"><b>Copyright &copy; 2001-2018  riocar.org<BR>

    </b>All logos and trademarks on this site are property of their respective owners. The comments are property of their posters.</font></td>
  </tr>
</table>

    </font></center>

    
    </body>

    </html>
